package {{.Service.NameToLower}}

// Generated automatically by microgen: do not edit manually

import (
    {{if .Service.HasDateField}}"time"{{end}}
    "{{.Application.Package}}/{{.Application.NameToFirstLower}}/events"
    {{if .Service.ConsumesEvents}}"{{.Application.Package}}/lib/envelope"{{end}}
)

// commands

{{range .Service.Commands}}
  {{if not .IsQuery}} 
	type {{.NameToFirstUpper}}Command struct {
	{{range .Input.Attributes}} {{.NameToFirstUpper}} {{.MultiplicityName}} {{.TypeName}} `json:"{{.Name}}" {{ if .IsMandatory }}binding:"required"{{end}}`
	{{end}}
	}

  {{end}}
{{end}}

type CommandHandler interface {
    Start( listenPort int)
    {{range .Service.Commands}}
    	{{if .IsQuery}} Handle{{.NameToFirstUpper}}Query ( {{range .Input.Attributes}} {{.NameToFirstLower}} {{.TypeName}}, {{end}} ) ({{.OutputName}}, error)
    	{{else}} Handle{{.NameToFirstUpper}}Command ( command *{{.NameToFirstUpper}}Command ) error
    	{{end}}
    {{end}}
}

// events

type EventHandler interface {
    Start()
    {{if .Service.ConsumesEvents}}OnEnvelope( envelop *envelope.Envelope) error
    {{end}}
    {{range .Service.GetConsumedEvents}} On{{.NameToFirstUpper}} ( event *events.{{.NameToFirstUpper}} ) error
    {{end}}
}

type EventApplier interface {
    {{range .Service.GetAllEvents}} Apply{{.NameToFirstUpper}} ( event *events.{{.NameToFirstUpper}} )
    {{end}}
}

